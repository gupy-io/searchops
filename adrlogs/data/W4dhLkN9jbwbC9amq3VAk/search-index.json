{"lunr":{"version":"2.3.9","fields":["title","verbatim"],"fieldVectors":[["title/20210203-optional-document-schema-validation",[0,182.322,1,182.322,2,182.322,3,182.322]],["verbatim/20210203-optional-document-schema-validation",[0,0.323,1,0.287,2,0.365,3,0.362,4,0.591,5,0.288,6,0.396,7,0.288,8,0.396,9,0.452,10,0.396,11,0.51,12,0.55,13,0.527,14,0.288,15,0.288,16,0.452,17,0.452,18,0.452,19,0.396,20,0.288,21,0.487,22,0.396,23,0.288,24,0.288,25,0.396,26,0.396,27,0.288,28,0.396,29,0.54,30,0.396,31,0.527,32,0.288,33,0.288,34,0.288,35,0.288,36,0.288,37,0.396,38,0.288,39,0.288,40,0.288,41,0.288,42,0.288,43,0.288,44,0.396,45,0.288,46,0.288,47,0.396,48,0.452,49,0.288,50,0.288,51,0.288,52,0.288,53,0.288,54,0.288,55,0.288,56,0.288,57,0.452,58,0.396,59,0.396,60,0.452,61,0.288,62,0.487,63,0.396,64,0.288,65,0.288,66,0.288,67,0.288,68,0.487,69,0.487,70,0.288,71,0.288,72,0.288,73,0.396,74,0.288,75,0.288,76,0.288,77,0.396,78,0.288,79,0.452,80,0.288,81,0.288,82,0.396,83,0.288,84,0.452,85,0.288,86,0.288,87,0.288,88,0.288,89,0.396,90,0.288,91,0.288,92,0.396,93,0.452,94,0.396,95,0.288,96,0.396,97,0.396,98,0.452,99,0.288,100,0.452,101,0.487,102,0.396,103,0.288,104,0.288,105,0.288,106,0.396,107,0.288,108,0.288,109,0.452,110,0.396,111,0.396,112,0.288,113,0.452,114,0.452,115,0.288,116,0.288,117,0.452,118,0.288,119,0.288,120,0.487,121,0.288,122,0.527,123,0.527,124,0.288,125,0.396,126,0.452,127,0.396,128,0.487,129,0.487,130,0.288,131,0.288,132,0.288,133,0.288,134,0.288,135,0.288,136,0.288,137,0.288,138,0.288,139,0.288,140,0.288,141,0.288,142,0.288,143,0.288,144,0.396,145,0.288,146,0.288,147,0.288,148,0.288,149,0.288,150,0.288,151,0.288,152,0.396,153,0.288,154,0.288,155,0.288]]],"invertedIndex":[["",{"_index":4,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[1,2],[194,1],[209,1],[1252,2],[1491,2],[1748,2],[1848,3],[2034,3],[2139,2],[2172,3],[2282,3],[2375,3],[2588,3],[2739,3],[2859,2],[2868,2],[2884,1]]}}}],["0.0.4",{"_index":10,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[54,6],[781,5]]}}}],["1",{"_index":79,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[1273,2],[1553,2],[1687,2]]}}}],["163",{"_index":145,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[2903,5]]}}}],["164",{"_index":148,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[2990,5]]}}}],["2",{"_index":84,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[1310,2],[1587,2],[1713,2]]}}}],["20210203",{"_index":150,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[3000,8]]}}}],["3",{"_index":95,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[1615,2]]}}}],["6.x",{"_index":13,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[78,3],[333,3],[996,3],[1598,3],[2298,3],[2446,3]]}}}],["7.x",{"_index":59,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[816,4],[2924,3]]}}}],["a1",{"_index":124,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[2176,3]]}}}],["a2",{"_index":130,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[2286,3]]}}}],["a3",{"_index":132,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[2379,3]]}}}],["adopt",{"_index":40,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[505,8]]}}}],["adr",{"_index":149,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[2996,3]]}}}],["ajv",{"_index":12,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[66,3],[329,3],[809,3],[1187,6],[1594,3],[2294,3],[2442,3],[2920,3]]}}}],["altern",{"_index":135,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[2569,11]]}}}],["ambigu",{"_index":52,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[717,10]]}}}],["amort",{"_index":112,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[1991,9]]}}}],["aren't",{"_index":80,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[1281,6]]}}}],["astonishment][pola",{"_index":86,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[1333,19]]}}}],["avail",{"_index":108,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[1897,9]]}}}],["b",{"_index":99,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[1649,2]]}}}],["b1",{"_index":137,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[2592,3]]}}}],["b2",{"_index":140,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[2743,3]]}}}],["befor",{"_index":15,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[116,6]]}}}],["behav",{"_index":133,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[2429,7]]}}}],["behavior",{"_index":114,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[2011,8],[2116,8],[2711,8]]}}}],["cach",{"_index":29,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[343,5],[864,7],[925,5],[1556,5],[1784,7],[2180,5],[2455,7]]}}}],["chang",{"_index":96,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[1618,6],[2383,6]]}}}],["change][ajv",{"_index":61,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[841,12]]}}}],["chose",{"_index":138,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[2676,5]]}}}],["chosen",{"_index":104,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[1769,6]]}}}],["class",{"_index":71,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[1128,5]]}}}],["client",{"_index":25,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[263,6],[411,6]]}}}],["code",{"_index":128,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[2264,4],[2330,4],[2500,4],[2792,4]]}}}],["compil",{"_index":30,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[349,8],[1968,11]]}}}],["complex",{"_index":119,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[2095,10]]}}}],["con",{"_index":123,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[2151,4],[2250,5],[2348,5],[2548,5],[2694,5],[2810,5]]}}}],["consequ",{"_index":106,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[1861,12],[2047,12]]}}}],["consid",{"_index":91,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[1494,10]]}}}],["constructor",{"_index":24,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[241,11]]}}}],["contain",{"_index":35,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[459,10]]}}}],["context",{"_index":5,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[4,7]]}}}],["convers",{"_index":20,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[174,10]]}}}],["cost",{"_index":109,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[1920,4],[1980,4],[2645,4]]}}}],["critic",{"_index":146,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[2939,8]]}}}],["danger",{"_index":43,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[588,10]]}}}],["data",{"_index":37,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[478,5],[647,4]]}}}],["date",{"_index":57,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[766,5],[2244,4],[2542,4]]}}}],["day",{"_index":39,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[497,4]]}}}],["decis",{"_index":77,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[1255,8],[1751,8]]}}}],["default",{"_index":113,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[2003,7],[2108,7],[2703,7]]}}}],["depend",{"_index":126,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[2227,10],[2363,10],[2525,10]]}}}],["differ",{"_index":97,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[1630,9],[2395,9]]}}}],["directli",{"_index":65,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[935,8]]}}}],["document",{"_index":1,"title":{"20210203-optional-document-schema-validation":{"position":[[9,8]]}},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[107,8],[449,9],[3020,8]]}}}],["driver",{"_index":78,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[1264,7]]}}}],["dynam",{"_index":50,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[690,7]]}}}],["e.g",{"_index":53,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[728,4]]}}}],["earli",{"_index":38,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[491,5]]}}}],["elasticsearch",{"_index":17,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[137,13],[514,14],[676,13]]}}}],["even",{"_index":72,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[1148,4]]}}}],["exist",{"_index":32,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[380,6]]}}}],["fail",{"_index":54,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[733,7]]}}}],["featur",{"_index":31,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[372,7],[1677,8],[1738,7],[2075,8],[2769,7],[2836,7]]}}}],["find",{"_index":51,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[712,4]]}}}],["found",{"_index":136,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[2581,5]]}}}],["gener",{"_index":70,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[1090,9]]}}}],["github",{"_index":144,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[2889,7],[2976,7]]}}}],["gone",{"_index":142,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[2853,4]]}}}],["gonna",{"_index":81,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[1288,5]]}}}],["happen",{"_index":23,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[227,6]]}}}],["help",{"_index":44,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[616,4],[2821,7]]}}}],["https://en.wikipedia.org/wiki/principle_of_least_astonish",{"_index":90,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[1428,61]]}}}],["https://en.wikipedia.org/wiki/you_aren%27t_gonna_need_it",{"_index":88,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[1363,56]]}}}],["https://github.com/ajv",{"_index":75,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[1194,22]]}}}],["https://github.com/gupi",{"_index":152,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[3065,24],[3124,24]]}}}],["incom",{"_index":14,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[98,8]]}}}],["indefinit",{"_index":94,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[1602,12],[2302,12]]}}}],["index",{"_index":18,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[154,5],[431,5],[534,7]]}}}],["instanti",{"_index":26,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[270,14],[1134,13]]}}}],["instead",{"_index":66,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[944,7]]}}}],["interpret",{"_index":55,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[744,9]]}}}],["introduc",{"_index":60,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[827,11],[1021,10],[2928,10]]}}}],["intuit",{"_index":115,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[2023,9]]}}}],["invalid",{"_index":36,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[470,7]]}}}],["io/searchops/issues/163",{"_index":153,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[3090,24]]}}}],["io/searchops/issues/164",{"_index":155,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[3149,24]]}}}],["issu",{"_index":69,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[1058,5],[2897,5],[2984,5],[3056,8]]}}}],["issue][issu",{"_index":147,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[2960,13]]}}}],["it][yagni",{"_index":83,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[1299,10]]}}}],["json",{"_index":22,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[196,4],[1074,4]]}}}],["keep",{"_index":125,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[2221,5],[2519,5]]}}}],["key",{"_index":64,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[931,3]]}}}],["less",{"_index":120,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[2128,4],[2325,4],[2495,4],[2787,4]]}}}],["librari",{"_index":98,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[1640,7],[2405,7],[2416,7]]}}}],["link",{"_index":143,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[2862,5]]}}}],["maintain",{"_index":129,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[2272,8],[2338,8],[2508,8],[2800,8]]}}}],["make",{"_index":100,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[1690,4],[1821,4],[2596,4]]}}}],["map",{"_index":21,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[185,7],[563,9],[698,7],[1160,7]]}}}],["mean",{"_index":118,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[2084,5]]}}}],["more",{"_index":117,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[2063,4],[2090,4],[2259,4]]}}}],["need",{"_index":82,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[1294,4],[1951,4]]}}}],["neg",{"_index":116,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[2038,8]]}}}],["new",{"_index":47,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[643,3],[1105,3]]}}}],["object",{"_index":62,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[891,6],[1569,7],[1799,7],[2193,7]]}}}],["opt",{"_index":101,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[1706,3],[1837,3],[2068,3],[2612,3]]}}}],["optim",{"_index":27,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[298,7]]}}}],["option",{"_index":0,"title":{"20210203-optional-document-schema-validation":{"position":[[0,8]]}},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[1505,7],[1776,7],[2163,7],[2873,8],[3011,8]]}}}],["order",{"_index":33,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[390,5]]}}}],["ourselv",{"_index":93,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[1577,9],[1807,9],[2201,9]]}}}],["outcom",{"_index":103,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[1760,7]]}}}],["paid",{"_index":110,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[1928,4],[2653,4]]}}}],["perform",{"_index":68,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[1046,11],[1531,11],[2633,11],[2948,11]]}}}],["pola",{"_index":89,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[1420,7],[2685,7]]}}}],["posit",{"_index":105,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[1852,8]]}}}],["prevent",{"_index":46,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[627,7]]}}}],["previous",{"_index":67,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[1004,11]]}}}],["principl",{"_index":85,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[1313,10]]}}}],["pro",{"_index":122,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[2142,4],[2212,5],[2316,5],[2486,5],[2620,5],[2778,5]]}}}],["problem",{"_index":6,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[16,7],[1543,8]]}}}],["protect",{"_index":34,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[399,7]]}}}],["proven",{"_index":141,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[2829,6]]}}}],["refer",{"_index":63,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[898,9],[1109,9]]}}}],["regard",{"_index":92,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[1517,9],[1652,9]]}}}],["remov",{"_index":102,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[1716,6],[2747,6]]}}}],["request",{"_index":19,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[160,9],[437,8]]}}}],["safe",{"_index":121,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[2133,4]]}}}],["safest",{"_index":139,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[2731,6]]}}}],["schema",{"_index":2,"title":{"20210203-optional-document-schema-validation":{"position":[[18,6]]}},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[201,6],[358,8],[857,6],[884,6],[986,6],[1079,6],[1562,6],[1792,6],[1961,6],[2186,6],[2477,7],[3029,6]]}}}],["searchop",{"_index":8,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[35,9],[790,9]]}}}],["send",{"_index":16,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[123,7],[423,7],[635,7]]}}}],["serial",{"_index":48,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[652,10],[965,13],[2466,10]]}}}],["signific",{"_index":28,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[314,11],[1034,11]]}}}],["stale",{"_index":131,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[2357,5]]}}}],["statement",{"_index":7,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[24,9]]}}}],["stay",{"_index":73,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[1168,6],[1985,5]]}}}],["still",{"_index":107,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[1891,5]]}}}],["strict",{"_index":42,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[556,6]]}}}],["string",{"_index":56,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[756,6]]}}}],["suitabl",{"_index":134,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[2560,8]]}}}],["those",{"_index":111,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[1941,5],[2666,5]]}}}],["track",{"_index":154,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[3115,8]]}}}],["unchang",{"_index":74,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[1175,10]]}}}],["up",{"_index":127,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[2238,2],[2536,2]]}}}],["upgrad",{"_index":58,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[800,8],[2909,7]]}}}],["us",{"_index":11,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[61,4],[917,4],[955,5],[1590,3],[2290,3]]}}}],["user",{"_index":45,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[621,5]]}}}],["valid",{"_index":3,"title":{"20210203-optional-document-schema-validation":{"position":[[25,10]]}},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[85,8],[211,9],[599,10],[1666,10],[1695,10],[1727,10],[1826,10],[1877,10],[1909,10],[2601,10],[2758,10]]}}}],["validation][track",{"_index":151,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[3036,18]]}}}],["validator/ajv/releases/tag/v7.0.0",{"_index":76,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[1217,33]]}}}],["version",{"_index":9,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[45,8],[70,7],[773,7]]}}}],["way",{"_index":49,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[666,4]]}}}],["wouldn't",{"_index":41,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[542,8]]}}}],["yagni",{"_index":87,"title":{},"verbatim":{"20210203-optional-document-schema-validation":{"position":[[1354,8]]}}}]],"pipeline":["stemmer"]},"adrs":[["20210203-optional-document-schema-validation",{"title":"Optional document schema validation","verbatim":"\n## Context and Problem Statement\n\nSearchops versions <0.0.4 used Ajv version 6.x to validate the incoming document\nbefore sending it to Elasticsearch on index requests. The conversion Mapping ->\nJSON Schema -> Validator would happen in the constructor for every client\ninstantiation. This was not optimal but not significant as Ajv 6.x would cache\ncompiled schemas.\n\nThe feature exists in order to protect the client from sending index requests of\ndocuments containing invalid data. In the early days of adopting Elasticsearch,\nmost indexes wouldn't have strict mappings, which could be dangerous. Validation\nwould help users prevent sending new data serialized in ways that Elasticsearch\ndynamic mapping would find ambiguous, e.g. failing to interpret a string as\nDate.\n\nVersion 0.0.4 of searchops upgraded Ajv to 7.x, which [introduced a change][ajv]\nin schema caching so that the schema object reference would be used as cache key\ndirectly instead of using the serialization of the schema as 6.x did previously.\nThis introduced a significant performance issue since the JSON Schema was\ngenerated in a new reference at every class instantiation even if the mapping\nstayed unchanged.\n\n[ajv]: https://github.com/ajv-validator/ajv/releases/tag/v7.0.0\n\n## Decision Drivers\n\n1. [You Aren't Gonna Need It][yagni]\n2. [Principle of Least Astonishment][pola]\n\n[yagni]: https://en.wikipedia.org/wiki/You_aren%27t_gonna_need_it\n[pola]: https://en.wikipedia.org/wiki/Principle_of_least_astonishment\n\n## Considered Options\n\nA) Regarding the performance problem:\n\n1. Cache schema objects ourselves\n2. Use Ajv 6.x indefinitely\n3. Change to a different library\n\nB) Regarding the validation feature:\n\n1. Make validation opt-in\n2. Remove the validation feature\n\n\n## Decision Outcome\n\nChosen option: **cache schema objects ourselves AND make validation opt-in**.\n\n### Positive Consequences\n\n- Validation is still available\n- Validation cost is paid only by those who need it\n- Schema compilation cost stays amortized\n- Default behavior is intuitive\n\n### Negative Consequences\n\n- More opt-in features means more complexity\n- Default behavior is less safe\n\n## Pros and Cons of the Options\n\n### A1: Cache schema objects ourselves\n\nPros:\n\n- Keeps dependency up to date\n\nCons:\n\n- More code to maintain\n\n### A2: Use Ajv 6.x indefinitely\n\nPros:\n\n- Less code to maintain\n\nCons:\n\n- Stale dependency\n\n### A3: Change to a different library\n\nA library that behaves like Ajv 6.x did, caching by serialized schema.\n\nPros:\n\n- Less code to maintain\n- Keeps dependency up to date\n\nCons:\n\n- No suitable alternative found\n\n### B1: Make validation opt-in\n\nPros:\n\n- The performance cost is paid only by those who chose to (+POLA)\n\nCons:\n\n- Default behavior is not the safest\n\n### B2: Remove the validation feature\n\nPros:\n\n- Less code to maintain\n\nCons:\n\n- A helpful-proven feature would be gone\n\n## Links <!-- optional -->\n\n- [GitHub Issue #163: Upgrade to Ajv 7.x introduced critical performance issue][issue]\n- [GitHub Issue #164: ADR 20210203 - Optional document schema validation][track]\n\n[issue]: (https://github.com/gupy-io/searchops/issues/163)\n[track]: (https://github.com/gupy-io/searchops/issues/164)\n"}]]}